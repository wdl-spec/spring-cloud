<mxfile host="app.diagrams.net" modified="2023-12-08T09:06:08.171Z" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36 Edg/119.0.0.0" etag="fvEWNNI1kOqdJV2V2ZAC" version="22.1.7" type="github">
  <diagram name="第 1 页" id="iPisYXHB47f-z4OymLtx">
    <mxGraphModel dx="2649" dy="2218" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-1" value="" style="whiteSpace=wrap;html=1;aspect=fixed;fillColor=#F82A53;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="400" y="300" width="170" height="170" as="geometry" />
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-2" value="云(saas)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="455" y="300" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-3" value="云平台(IOT)" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="425" y="326" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-4" value="SpringCloud框架" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="425" y="375" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-5" value="nacos,feign,&lt;br&gt;sentinel,config&lt;br&gt;zipkin,springboot-admin" style="whiteSpace=wrap;html=1;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="414" y="410" width="150" height="60" as="geometry" />
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-30" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="SbiCq8tXSKzd1rhAV3YR-7" target="SbiCq8tXSKzd1rhAV3YR-29" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-7" value="产品设备注册" style="ellipse;whiteSpace=wrap;html=1;fontStyle=1;fontSize=16;fillColor=#CCCC76;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="-140" y="40" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-8" value="用户注册和认证" style="ellipse;whiteSpace=wrap;html=1;fontStyle=1;fontSize=16;fillColor=#CCCC89;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="1030" width="140" height="80" as="geometry" />
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-9" value="页面请求" style="ellipse;whiteSpace=wrap;html=1;fontStyle=1;fontSize=16;fillColor=#C4CC81;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="280" y="1754" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-10" value="业务层" style="ellipse;whiteSpace=wrap;html=1;fontStyle=1;fontSize=16;fillColor=#B4CC7A;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="1590" y="1754" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-11" value="数据层" style="ellipse;whiteSpace=wrap;html=1;fontStyle=1;fontSize=16;fillColor=#C2CC83;strokeColor=#b85450;" parent="1" vertex="1">
          <mxGeometry x="2410" y="1754" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-12" value="" style="whiteSpace=wrap;html=1;aspect=fixed;" parent="1" vertex="1">
          <mxGeometry x="-200" y="160" width="450" height="450" as="geometry" />
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-13" value="产品(设备的集合)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-130" y="180" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-22" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="SbiCq8tXSKzd1rhAV3YR-15" target="SbiCq8tXSKzd1rhAV3YR-21" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-15" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-160" y="215" width="140" height="325" as="geometry" />
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-16" value="设备" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-120" y="230" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-17" value="硬件传感器设备" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-140" y="554" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-21" value="设&lt;br&gt;备&lt;br&gt;网&lt;br&gt;关&lt;br&gt;&lt;br&gt;mqtt协议" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="70" y="252.5" width="70" height="250" as="geometry" />
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-23" value="" style="endArrow=classic;startArrow=classic;html=1;rounded=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="SbiCq8tXSKzd1rhAV3YR-12" target="SbiCq8tXSKzd1rhAV3YR-1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="730" y="410" as="sourcePoint" />
            <mxPoint x="780" y="360" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-24" value="硬件与软件连接" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="SbiCq8tXSKzd1rhAV3YR-23" vertex="1" connectable="0">
          <mxGeometry x="0.0133" y="-4" relative="1" as="geometry">
            <mxPoint x="-1" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-25" value="" style="endArrow=classic;html=1;rounded=0;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=0;entryY=0.088;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="SbiCq8tXSKzd1rhAV3YR-21" target="SbiCq8tXSKzd1rhAV3YR-1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="390" y="410" as="sourcePoint" />
            <mxPoint x="390" y="315" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-26" value="topic上传收集数据" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="220" y="288" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-27" value="" style="endArrow=classic;html=1;rounded=0;exitX=-0.011;exitY=0.811;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.756;entryY=0.622;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="SbiCq8tXSKzd1rhAV3YR-1" target="SbiCq8tXSKzd1rhAV3YR-12" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="390" y="410" as="sourcePoint" />
            <mxPoint x="440" y="360" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-28" value="topic下发设备执行指令" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="210" y="440" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="73Z8bToE0E0CVtLenRyU-4" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="SbiCq8tXSKzd1rhAV3YR-29" target="73Z8bToE0E0CVtLenRyU-3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="73Z8bToE0E0CVtLenRyU-6" value="产品,设备的注册和认证过程" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="73Z8bToE0E0CVtLenRyU-4" vertex="1" connectable="0">
          <mxGeometry x="-0.0107" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-29" value="产品标识: ProductKey&lt;br&gt;&lt;br&gt;设备标识: DeviceKey&lt;br&gt;&lt;br&gt;设备密钥: DeviceSecret" style="whiteSpace=wrap;html=1;aspect=fixed;" parent="1" vertex="1">
          <mxGeometry x="40" y="15" width="130" height="130" as="geometry" />
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-32" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.25;entryY=0;entryDx=0;entryDy=0;exitX=0.429;exitY=1.033;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" source="SbiCq8tXSKzd1rhAV3YR-7" target="SbiCq8tXSKzd1rhAV3YR-12" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-220" y="140" as="sourcePoint" />
            <mxPoint x="-170" y="90" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-33" value="" style="whiteSpace=wrap;html=1;aspect=fixed;" parent="1" vertex="1">
          <mxGeometry x="500" y="-120" width="280" height="280" as="geometry" />
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-34" value="用户认证连接物联网云平台" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="545" y="-90" width="200" height="30" as="geometry" />
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-35" value="租户标识: AccessKey&lt;br&gt;&lt;br&gt;租户密钥:&amp;nbsp; AccessSecret" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="570" y="-20" width="185" height="140" as="geometry" />
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-36" value="用&lt;br&gt;户&lt;br&gt;认&lt;br&gt;证" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="515" width="60" height="100" as="geometry" />
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-41" value="" style="endArrow=classic;html=1;rounded=0;entryX=1.001;entryY=0.572;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" target="SbiCq8tXSKzd1rhAV3YR-33" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1030" y="40" as="sourcePoint" />
            <mxPoint x="1080" y="-10" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-42" value="" style="endArrow=classic;html=1;rounded=0;entryX=1;entryY=0;entryDx=0;entryDy=0;exitX=0.25;exitY=1;exitDx=0;exitDy=0;" parent="1" source="SbiCq8tXSKzd1rhAV3YR-33" target="SbiCq8tXSKzd1rhAV3YR-1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="520" y="160" as="sourcePoint" />
            <mxPoint x="570" y="110" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-47" value="租户认证使用" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="SbiCq8tXSKzd1rhAV3YR-42" vertex="1" connectable="0">
          <mxGeometry x="0.0029" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-44" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="820" y="200" width="1113" height="410" as="geometry" />
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-45" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.25;entryY=0;entryDx=0;entryDy=0;" parent="1" target="SbiCq8tXSKzd1rhAV3YR-44" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1100" y="80" as="sourcePoint" />
            <mxPoint x="1150" y="30" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-48" value="租户详细注册过程" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="SbiCq8tXSKzd1rhAV3YR-45" vertex="1" connectable="0">
          <mxGeometry x="-0.0361" y="-2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-46" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.994;entryY=0.599;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="SbiCq8tXSKzd1rhAV3YR-44" target="SbiCq8tXSKzd1rhAV3YR-1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="810" y="400" as="sourcePoint" />
            <mxPoint x="760" y="360" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-49" value="租户注册到云平台使用设备" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="SbiCq8tXSKzd1rhAV3YR-46" vertex="1" connectable="0">
          <mxGeometry x="-0.1285" y="3" relative="1" as="geometry">
            <mxPoint x="1" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-50" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="93" y="710" width="1840" height="970" as="geometry" />
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-54" value="驱动层" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="330" y="570" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-55" value="管理层&lt;br&gt;&lt;br&gt;数据层" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="504" y="650" width="60" height="60" as="geometry" />
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-57" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="180" y="870" width="290" height="710" as="geometry" />
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-58" value="页面" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="300" y="820" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-59" value="用户" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="250" y="980" width="120" height="70" as="geometry" />
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-60" value="管理员" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="250" y="1210" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-61" value="第三方系统" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="250" y="1420" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-62" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="625" y="870" width="655" height="710" as="geometry" />
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-63" value="云平台网关(manager-gateway)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="850" y="820" width="240" height="30" as="geometry" />
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-66" value="租户鉴权:&lt;br&gt;鉴定token令牌,采用jwt技术鉴权" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="660" y="910" width="590" height="160" as="geometry" />
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-67" value="管理服务放行,管理服务中鉴权" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="660" y="1169" width="580" height="111" as="geometry" />
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-68" value="第三方接口鉴权:&lt;br&gt;1.鉴定租户sign令牌:令牌采用租户标识和租户密钥组成字符串,使用MD5加密并且加盐&lt;br&gt;2.鉴定租户标识和租户密钥" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="660" y="1360" width="580" height="180" as="geometry" />
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-69" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1405" y="870" width="450" height="710" as="geometry" />
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-70" value="业务层" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1600" y="820" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-71" value="租户服务&lt;br&gt;tenant-manager" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1460" y="920" width="340" height="130" as="geometry" />
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-72" value="后台管理服务&lt;br&gt;user-manager&lt;br&gt;&lt;br&gt;使用SpringSecurity框架&lt;br&gt;(RBAC模型)" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1460" y="1130" width="340" height="180" as="geometry" />
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-73" value="第三方接口服务&lt;br&gt;qf-api" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1460" y="1380" width="340" height="100" as="geometry" />
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-75" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="SbiCq8tXSKzd1rhAV3YR-57" target="SbiCq8tXSKzd1rhAV3YR-62" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="470" y="1275" as="sourcePoint" />
            <mxPoint x="540.7106781186548" y="1225" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-76" value="" style="endArrow=classic;html=1;rounded=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1270" y="1230" as="sourcePoint" />
            <mxPoint x="1405" y="1228" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-78" value="&lt;font style=&quot;font-size: 20px;&quot;&gt;存储数据&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2220" y="869.5" width="480" height="710" as="geometry" />
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-79" value="MySQL" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" parent="1" vertex="1">
          <mxGeometry x="2390" y="980" width="130" height="160" as="geometry" />
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-80" value="redis" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="2395" y="1340" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-82" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.002;entryY=0.419;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" target="SbiCq8tXSKzd1rhAV3YR-78" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1930" y="1170" as="sourcePoint" />
            <mxPoint x="1980" y="1120" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="qELQCeV14SjLNocWs9rX-19" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="SbiCq8tXSKzd1rhAV3YR-83" target="qELQCeV14SjLNocWs9rX-12">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="qELQCeV14SjLNocWs9rX-22" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="SbiCq8tXSKzd1rhAV3YR-83" target="qELQCeV14SjLNocWs9rX-20">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="qELQCeV14SjLNocWs9rX-28" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="SbiCq8tXSKzd1rhAV3YR-83" target="qELQCeV14SjLNocWs9rX-26">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-83" value="租户(租户使用)" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-120" y="2100" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="qELQCeV14SjLNocWs9rX-24" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="SbiCq8tXSKzd1rhAV3YR-84" target="qELQCeV14SjLNocWs9rX-23">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-84" value="后台管理(管理员使用)" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="635" y="2130" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-86" value="租户注册&lt;br&gt;租户认证&lt;br&gt;租户的产品管理" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="-220" y="2115" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-87" value="租户管理&lt;br&gt;租户审核&lt;br&gt;产品管理&lt;br&gt;设备管理等" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="750" y="2285" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-90" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" target="SbiCq8tXSKzd1rhAV3YR-84" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="340" y="1960" as="sourcePoint" />
            <mxPoint x="390" y="1910" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-91" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" target="SbiCq8tXSKzd1rhAV3YR-83" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="330" y="1960" as="sourcePoint" />
            <mxPoint x="150" y="1940" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-98" value="" style="endArrow=classic;html=1;rounded=0;" parent="1" source="SbiCq8tXSKzd1rhAV3YR-9" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="340" y="1733.2893218813451" as="sourcePoint" />
            <mxPoint x="340" y="1683.2893218813451" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-99" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.845;entryY=1.001;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" target="SbiCq8tXSKzd1rhAV3YR-50" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1648" y="1750" as="sourcePoint" />
            <mxPoint x="1700" y="1700" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-100" value="1.点击发送验证码" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="850" y="253" width="120" height="67" as="geometry" />
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-101" value="a. 接收并验证手机号,生成验证码;将生成的验证码根据手机号存储在Redis中;&lt;br&gt;b. 将生成的验证码通过阿里云的短信服务发送到对应的手机号;然后在注册页面填写验证码" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1060" y="253" width="760" height="67" as="geometry" />
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-102" value="2.填写注册信息" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="850" y="375" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-103" value="3.点击注册" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="850" y="494" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-104" value="a. 页面携带用户信息,手机号和验证码;&lt;br&gt;b. 根据手机号从Redis里查询验证码;&lt;br&gt;c. 比对校验注册页面携带的验证码和redis里存储的验证码是否一致;&lt;br&gt;d. 校验通过,则注册成功,保存租户信息到数据库进行持久化存储" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1060" y="450" width="760" height="120" as="geometry" />
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-105" value="在页面操作" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="280" y="1900" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="SbiCq8tXSKzd1rhAV3YR-106" value="" style="endArrow=classic;html=1;rounded=0;" parent="1" source="SbiCq8tXSKzd1rhAV3YR-9" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="340" y="1884" as="sourcePoint" />
            <mxPoint x="340" y="1904.7106781186549" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="73Z8bToE0E0CVtLenRyU-3" value="DeviceKey : 是否有该设备&lt;br&gt;DeviceSecret: 设备的密钥是否正确&lt;br&gt;&lt;br&gt;1. 产品与设备之间是一对多的关联关系;&lt;br&gt;先创建产品,基于产品创建设备.产品,设备创建出来后,会自动生成ProducketKey,DeviceKey,DeviceSecret&lt;br&gt;2. 修改物理设备中产品的标识以及设备的标识,完成物理设备与自己在云平台创建的产品和设备的关联关系;&lt;br&gt;3. 创建出mqtt的topic 用于数据的上传以及指令下发操作;&lt;br&gt;4. 物理设备请求认证接口,完成设备认证操作;" style="shape=card;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="-25" y="-310" width="260" height="210" as="geometry" />
        </mxCell>
        <mxCell id="73Z8bToE0E0CVtLenRyU-9" value="Mqtt协议定义:&lt;br&gt;MQTT协议是一种基于发布-订阅模式的轻量级消息传输协议.&lt;br&gt;&lt;br&gt;特点:&lt;br&gt;1. 基于发布-订阅模式,提供一对多的消息发布,解除应用耦合性;&lt;br&gt;2. 使用TCP , IP提供网络连接;&lt;br&gt;3. 用于低带宽,弱网环境;&lt;br&gt;4. 小型传输,开销小;&lt;br&gt;5. MQTT比HTTP速率快90多倍;" style="shape=card;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="-150" y="760" width="150" height="260" as="geometry" />
        </mxCell>
        <mxCell id="73Z8bToE0E0CVtLenRyU-10" value="" style="endArrow=classic;startArrow=classic;html=1;rounded=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="73Z8bToE0E0CVtLenRyU-9" target="SbiCq8tXSKzd1rhAV3YR-21" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="-250" y="770" as="sourcePoint" />
            <mxPoint x="-200" y="720" as="targetPoint" />
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="73Z8bToE0E0CVtLenRyU-11" value="Mqtt协议" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="73Z8bToE0E0CVtLenRyU-10" vertex="1" connectable="0">
          <mxGeometry x="-0.0876" y="3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="73Z8bToE0E0CVtLenRyU-13" value="" style="endArrow=classic;html=1;rounded=0;entryX=0.583;entryY=0.999;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" target="SbiCq8tXSKzd1rhAV3YR-78" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="2470" y="1750" as="sourcePoint" />
            <mxPoint x="2520" y="1700" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="qELQCeV14SjLNocWs9rX-1" value="&lt;b&gt;&lt;font style=&quot;font-size: 25px;&quot;&gt;智慧家电控制系统&lt;/font&gt;&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="540" y="-480" width="510" height="60" as="geometry" />
        </mxCell>
        <mxCell id="qELQCeV14SjLNocWs9rX-2" value="电视机" style="rhombus;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-135" y="270" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="qELQCeV14SjLNocWs9rX-3" value="灯" style="rhombus;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-140" y="355" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="qELQCeV14SjLNocWs9rX-7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.25;exitY=1;exitDx=0;exitDy=0;entryX=1.003;entryY=0.96;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="SbiCq8tXSKzd1rhAV3YR-5" target="SbiCq8tXSKzd1rhAV3YR-12">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="452" y="592" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="qELQCeV14SjLNocWs9rX-8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.215;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="SbiCq8tXSKzd1rhAV3YR-5" target="SbiCq8tXSKzd1rhAV3YR-50">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="qELQCeV14SjLNocWs9rX-10" value="等等" style="rhombus;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-140" y="440" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="qELQCeV14SjLNocWs9rX-17" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="qELQCeV14SjLNocWs9rX-12" target="qELQCeV14SjLNocWs9rX-16">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="qELQCeV14SjLNocWs9rX-12" value="优惠卷" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="30" y="2240" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="qELQCeV14SjLNocWs9rX-16" value="1.sentinel，设置QPS进行流量控制&lt;br&gt;2.redisen,watchDog,保证线程安全" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="200" y="2175" width="200" height="190" as="geometry" />
        </mxCell>
        <mxCell id="qELQCeV14SjLNocWs9rX-20" value="各种家电的控制" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-120" y="2240" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="qELQCeV14SjLNocWs9rX-23" value="优惠卷管理&lt;br&gt;用户管理&lt;br&gt;退款管理" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="635" y="2270" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="qELQCeV14SjLNocWs9rX-26" value="家电状态监控" style="whiteSpace=wrap;html=1;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="-260" y="2240" width="120" height="60" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
